<!DOCTYPE html>
<html lang="zh-CN">
<head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="UTF-8">

    

    

    <title>react-hook 学习 | 卫某人的草原</title>
    <meta name="author" content="weisiwu">
    <meta name="version" content="1.0.0">
    <meta name="keywords" content>
    <meta name="description" content="hook 基础知识hooks 本质是一些特殊的函数，为你的函数组件注入特殊功能。它们的目的是不在使用class，而统一是哟 function 组件。一个常识是，在大中型项目中，react组件难以往往是难以直接复用的，其原因之一就是class组件具有状态(state)。react 官方之前推荐两种方式来做组件复用: 高阶组件（Higher-Order Components） &amp;amp;&amp;amp; 渲染属性（Render Props）同时react 的class 中存在一些生命周期钩子函数，...">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">

    
    <link rel="alternate" href="/atom.xml" title="卫某人的草原" type="application/atom+xml">
    
    
    <link rel="icon" href="/images/favicon.ico">
    

    <link rel="stylesheet" href="/css/style.css">
</head>
<body>

    <main class="app">
        
<header class="header clearfix post-layout">
    <div id="nav" class="nav">
    <div class="nav-mobile">
        <button id="open-panel" class="open-panel nav-mobile-item"><i class="icon-documents"></i></button>
        <h1 class="nav-mobile-title nav-mobile-item">卫某人的草原</h1>
        <button id="open-menus" class="open-panel nav-mobile-item"><i class="icon-library"></i></button>
    </div>

    <nav id="nav-inner" class="nav-inner">
        
            <a class="nav-item" href="/">
                <span class="nav-text">首页</span>
            </a>
        
            <a class="nav-item" href="/tags/frontend">
                <span class="nav-text">前端</span>
            </a>
        
            <a class="nav-item" href="/tags/linux">
                <span class="nav-text">os</span>
            </a>
        
            <a class="nav-item" href="/tags/software">
                <span class="nav-text">软件</span>
            </a>
        
            <a class="nav-item" href="/tags/about">
                <span class="nav-text">关于</span>
            </a>
        
    </nav>
</div>

    
</header>

        <div id="content" class="content post-layout"><article class="article" itemscope itemprop="blogPost">
    
    <header class="article-header">
        
        <h1 itemprop="name">
            react-hook 学习
        </h1>
        
        <div class="article-meta clearfix">
            <p class="article-date article-info-item">
    <i></i> 发表于: 
    <time datetime="2019-08-26T06:39:10.000Z" itemprop="datePublished">2019-08-26</time>
</p>

            
<div class="article-tag-list">
    <i class="icon-tag"></i>
    <a class="article-tag-link" href="/tags/frontend/">frontend</a>
</div>


        </div>
    </header>
    
    <section class="article-body markdown-body">
        
        <h2 id="hook-基础知识"><a href="#hook-基础知识" class="headerlink" title="hook 基础知识"></a>hook 基础知识</h2><p>hooks 本质是一些特殊的函数，为你的函数组件注入特殊功能。它们的目的是不在使用class，而统一是哟 function 组件。<br>一个常识是，在大中型项目中，react组件难以往往是难以直接复用的，其原因之一就是class组件具有状态(state)。</p>
<p>react 官方之前推荐两种方式来做组件复用: <a href="https://reactjs.org/docs/higher-order-components.html" target="_blank" rel="noopener">高阶组件（Higher-Order Components）</a> &amp;&amp; <a href="https://reactjs.org/docs/render-props.html" target="_blank" rel="noopener">渲染属性（Render Props）</a><br>同时react 的class 中存在一些生命周期钩子函数，这些钩子函数的存在也不利于组件的复用。<br>react 的class中还有一个this问题。例如: 存在多个具有共同部分的表格组件，但是它们之间也存在一些不同的地方需要在实例化的时候制定。<br>将其共同部分抽出为一个基础表格组件，特殊部分使用HOC的形式分别重写。但是因为基础表格组件自身也是通过引用三方的表格组件加上业务定制产生的。<br>所以这时，你会发现存在这样的一个调用连: 三方表格组件 -&gt; 基础表格组件 -&gt; 特殊实例化组件。这里的this绑定就会变得混乱不堪。  </p>
<p>有状态组件通常会把一些带有副作用的操作放到的生命周期中， 比如发起 ajax 来请求数据<br>useEffect 类似于 componentDidMount 和 componentDidUpdate<br>直观的来看，react-hook 似乎是将 class 中原有的一些生命周期和功能抽出来，方便函数组件以乐高积木的形式来集成这些功能。  </p>
<p>相关代码测试在 <a href="https://github.com/weisiwu/webpack-pack-test/tree/react-hook" target="_blank" rel="noopener">react-hook</a></p>
<h2 id="todo-liss"><a href="#todo-liss" class="headerlink" title="todo liss"></a>todo liss</h2><ol>
<li>列出 hooks 新添的函数列表和简要说明、官方文档地址。</li>
</ol>
<h2 id="hook-注意事项"><a href="#hook-注意事项" class="headerlink" title="hook 注意事项"></a>hook 注意事项</h2><ol>
<li>react 规定 hook 需要写在函数的最外层，不能写在 if/else 分支内部。[此点存疑，测试的时候没有发现这个问题]  </li>
</ol>
<h2 id="hook-的内部实现机制"><a href="#hook-的内部实现机制" class="headerlink" title="hook 的内部实现机制"></a>hook 的内部实现机制</h2><p>– 暂时不知道</p>
<p>参考文章:</p>
<ol>
<li><a href="https://segmentfault.com/a/1190000016950339" target="_blank" rel="noopener">30分钟精通React今年最劲爆的新特性——React Hooks</a></li>
<li><a href="http://react.html.cn/docs/hooks-state.html" target="_blank" rel="noopener">使用 State(状态) Hook</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/50597236" target="_blank" rel="noopener">一篇看懂 React Hooks</a></li>
</ol>

        
    </section>
</article>



<div class="comments">
    <div id="comments"></div>
    <script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
    <script>
    new Gitalk({
        clientID: "c3af3992520bacebd1c9",
        clientSecret: "68a9cac186eb0d7239f42203e5727428ef047a7e",
        repo: "weisiwu.github.io",
        owner: "weisiwu",
        admin: ["weisiwu"],
        id: "2019/08/26/react-hook.html",
        distractionFreeMode: true,
        title: "react-hook 学习",
        body: "https://weisiwu.github.io/2019/08/26/react-hook.html",
        labels: ["frontend"]
    }).render('comments');
    </script>
</div>

</div>
        
<footer class="footer post-layout">
    <p>Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>；Copyright © <a href="https://weisiwu.github.io/" target="_blank">卫思伍</a></p>
</footer>

    </main>

    <script src="/js/jquery.min.js"></script>
    <script type="text/javascript">
    $(function() {
        var nodes = {
            nav: $('#nav'),
            aside: $('#aside'),
            asideInner: $('#aside-inner'),
            navInner: $('#nav-inner')
        };

        var doing = false;
        nodes.asideInner.on('webkitAnimationEnd mozAnimationEnd oAnimationEnd oanimationend animationend', function() {
            if (nodes.aside.hasClass('mobile-open')) {
                nodes.aside.removeClass('mobile-open');
            } else {
                nodes.aside.removeClass('mobile-close panel-show');
            }
            doing = false;
        });
        $('#open-panel, #aside-mask').on('click', function() {
            if (doing) {
                return;
            }
            
            if (nodes.aside.hasClass('panel-show')) {
                nodes.aside.addClass('mobile-close');
            } else {
                nodes.aside.addClass('mobile-open panel-show');
            }
        });
        $('#open-menus').on('click', function() {
            nodes.navInner.slideToggle();
        });

        if (window.innerWidth <= 960) {
            setTimeout(function() {
                nodes.navInner.slideUp();
            }, 3000);
        }
    });
    </script>
    
        <script type="text/javascript" src="/js/scrollspy.min.js"></script>
        <script type="text/javascript">
        $(document.body).scrollspy({target: '#aside-inner'});
        </script>
    

</body>
</html>
